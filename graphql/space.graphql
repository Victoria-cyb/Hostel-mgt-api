scalar DateTime

enum SpaceRole {
  admin
  student
  parent
}

enum status {
  active
  inactive
}

type PublicSpace {
  id: ID!
  name: String!
  hostels: [PublicHostel!]!
}

type Space {
  id: ID!
  name: String!
  createdAt: DateTime!
  updatedAt: DateTime
  hostels: [Hostel!]
  users: [SpaceUser!]
  stayTypes: [StayType!]
  classes: [Class!]
  createdBy: SimpleUser!
  createdById: ID!
}

type SimpleUser {
  id: ID!
  firstName: String!
  lastName: String!
  email: String
}

type SimpleSpaceInfo {
  id: ID!
  name: String!
}

type SpaceUser {
  id: ID!
  user: User!
  firstName: String!
  lastName: String!
  email: String
  phone: String
  gender: Gender
  image: String
  role: String!
  space: SimpleSpaceInfo!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type Class {
  id: ID!
  space: Space
  names: [String!]!
  createdAt: String!
}

input CreateSpaceUserInput {
  role: String!
  firstName: String!
  lastName: String!
  email: String
  password: String!
  phone: String
  gender: Gender!
  image: String
  classId: ID
  parentId: ID
  studentId: [ID]
}

input CreateSpaceInput {
  name: String!
}

extend type Query {
  spaces: [Space!]! @auth
  publicSpaces: [PublicSpace!]! @auth
  space(id: ID!): Space @auth
  publicSpace(id: ID!): PublicSpace @auth
  classes(spaceId: ID!): [Class!]!
  class(id: ID!): Class
}

extend type Mutation {
  createSpace(input: CreateSpaceInput!): Space!
  createSpaceUsers(
    inputs: [CreateSpaceUserInput!]!
    spaceId: ID!
  ): [SpaceUser!]! @auth @spaceAuth(requires: [admin])
  linkParentToStudent(spaceId: ID!, parentId: ID!, studentId: ID!): Boolean!
    @auth
    @spaceAuth(requires: [admin])
  createClass(spaceId: ID!, names: [String!]!): Boolean!
    @auth
    @spaceAuth(requires: [admin])
}
